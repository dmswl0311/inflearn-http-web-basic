# 3강 TCP,UDP 

## ✔️ 인터넷 프로토콜 스택의 4계층 
어플리케이션 계층 - HTTP, FTP <br>
전송 계층 - TCP, UDP <br>
인터넷 계층 - IP <br>
네트워크 인터페이스 계층 <br>

<br>

### 프로토콜 계층
우리가 생각하는 컴퓨터 <br>

어플리케이션 (웹 브라우저, 네트워크 게임, 채팅 프로그램 등..) <br>
OS (운영체제 / TCP, UDP, IP) <br>
네트워크 인터페이스 (LAN 드라이버, LAN 장비) <br>
<br>
채팅 프로그램으로 미국에 있는 친구에게 "Hello World!" 를 전송하고 싶다 <br>
> 어떻게?  <br>
    1. 프로그램이 "Hello World!" 메세지 생성 (어플리케이션)<br>
    2. SOCKET 라이브러리를 통해 전달 (어플리케이션)<br>
    3. TCP 정보 생성, 메세지 데이터 포함 (OS)<br>
    4. IP 패킷 생성, TCP 데이터 포함 (OS)<br>
    6. 이더넷 프레임을 포함해 전달 (네트워크 인터페이스)<br>


IP 패킷은 IP와 관련된 정보 > TCP 정보 > 내가 보낸 메세지 를 포함한다. 

<br>

### IP패킷 정보 
- 출발지 IP
- 목적지 IP
- 기타

### TCP/UDP 패킷 정보
- 출발지 PORT
- 목적지 PORT
- 전송 제어
- 순서
- 검증 정보 ...

<br>


## ✔️ TCP 특징  
전송 제어 프로토콜
- 연결지향 TCP 3 way handshake(가상 연결)
- 데이터 전달 보증
    - 중간에 누락되면 알 수 있음
- 순서 보장

따라서..
- 신뢰할 수 있는 프로토콜
- 현재는 대부분 TCP 사용

<br>

### TCP 3 way handshake
1. 클라이언트 -> 서버로 SYN 메세지 보냄
2. 서버 -> 클라이언트로 ACK 메세지 보냄 +SYN
3. 클라이언트 -> 서버 ACK 메세지 보냄

클라이언트와 서버 모두 서로를 믿을 수 있다. <br>
연결이 되고나면, 그 다음에 데이터를 전송한다.
> 💡 3번을 실행할 때 ACK와 함께 데이터 전송이 가능하다!

하지만, 개념적으로만 연결된거임 > 물리적으로 연결되어있는게 아님!<br>
(물리적으로 랜선을 꼽는게 아니기 때문)<br>
연결이 됐나보다~ 하고 논리적으로 알게 되는거임 <br>
우리끼리 연결됐다고 생각하자! 치는거

<br>

### 데이터 전달 보증
데이터를 전송하면 데이터를 받는 서버가 데이터 받았다고 클라이언트에게 전해줌 <br>
근데 아무 대답이 없다? 잘 안갔나보다~

<br>

### 순서 보장
클라이언트는 패킷 1,2,3 순서로 보냄 <br>
근데 서버는 패킷 1,3,2 순서로 받음 <br>
서버가 패킷 2부터 다시 보내라고 클라이언트에게 메세지 보냄! <br>

-> 이게 어떻게 가능하냐?
TCP 패킷 정보 안에는 전송 제어, 순서, 검증 정보 등이 들어가 있기 때문에 가능한 것

<br>

## ✔️ UDP 특징
사용자 데이터그램 프로토콜
- 하얀 도화지에 비유 (기능이 거의 없음)
- 연결지향 - TCP 3 way handshake ❌
- 데이터 전달 보증 ❌
- 순서 보장 ❌
- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름
<br>

따라서..
- IP와 거의 같다. +PORT +체크섬 정도만 추가
- 애플리케이션에서 추가 작업 필요

<br>

### 그럼 UDP는 왜쓰냐❓ 
<br>
TCP는 3 way handshake 할려면 시간 걸림 + 데이터 전달 보증, 순서 보장, 들어가있는 데이터 많음 ... -> 전송 속도가 느려짐 
<br>
더 최적화하고 싶다? UDP 사용

<br>

